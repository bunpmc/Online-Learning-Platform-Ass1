@model CourseViewModel

@{
    ViewData["Title"] = Model.Title;
}

<div class="container-fluid">
    <div class="row">

        <!-- LEFT: Lesson content -->
        <div class="col-md-8 border-end" style="min-height: 100vh;">
            <h2>@Model.Title</h2>

            @if (Model.CurrentLessonId == null)
            {
                <p class="text-muted">
                    Chọn một bài học ở bên phải để bắt đầu.
                </p>
            }
            else
            {
                <div class="lesson-content mt-4">
                    <p>
                        Nội dung lesson đang được hiển thị ở đây.
                    </p>

                    <div class="alert alert-secondary">
                        Lesson ID: @Model.CurrentLessonId
                    </div>
                </div>
            }
        </div>

        <!-- RIGHT: Module & Lesson list -->
        <div class="col-md-4 bg-light" style="min-height: 100vh;">
            <h4 class="mt-3">Nội dung khóa học</h4>

            @foreach (var module in Model.Modules)
            {
                <div class="module mt-3">
                    <strong>@module.Title</strong>

                    <ul class="list-group list-group-flush mt-2">
                        @foreach (var lesson in module.Lessons)
                        {
                            <li class="list-group-item 
                                @(lesson.IsCurrent ? "active" : "")">
                                <a class="text-decoration-none 
                                   @(lesson.IsCurrent ? "text-white" : "")"
                                   href="@Url.Action(
                                        "Learn",
                                        "Course",
                                        new {
                                            courseId = Model.CourseId,
                                            lessonId = lesson.LessonId
                                        })">
                                    @lesson.Title
                                </a>
                            </li>
                        }
                    </ul>
                </div>
            }
        </div>

    </div>
</div>
